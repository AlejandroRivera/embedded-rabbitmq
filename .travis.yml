language: java

matrix:
  include:
  - os: linux         # Ubuntu 12.04 Precise
    jdk: oraclejdk7   # Java 1.7.0_76
  - os: osx           # OS X (10.9) which comes with Oracle's Java 1.7.0_45

cache:
  directories:
    - $HOME/.m2/repository
    - $HOME/.embeddedrabbitmq

before_install:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install erlang; fi      # Erlang 17 will be installed without even updating brew!
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then export JAVA_HOME="$(/usr/libexec/java_home -v 1.7)"; fi    # Required by Maven
  - erl -eval 'erlang:display(erlang:system_info(otp_release)), halt().'  -noshell

script:
  - mvn clean package

notifications:
  email:
    recipients:
      - alejandro.rivera.lopez@gmail.com
    on_success: change
    on_failure: always
